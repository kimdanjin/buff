const _0x5930a4=_0x5c0f;function _0x4fd6(){const _0x1119fb=['textContent','videoHeight',']\x20❌\x20템플릿\x20초기화\x20실패:\x20','165234MlKYKv','height','naturalWidth','873BavxxX','2463617KBpIxk','rows','status',']\x20✅\x20OpenCV\x20로딩\x20완료','warn','.template-thumbnail','roiHeightInput','img[src=\x22','click','getDisplayMedia','toFixed','value','alertSound',']\x20❌\x20URL에\x20해당하는\x20템플릿\x20이미지를\x20찾을\x20수\x20없습니다:\x20','15thupcs','drawImage','selectedTemplateUrl','6378mDyhhX','getItem','107552HGXIkM','canvas','1878331WPIXPE','target','play','width','naturalHeight','getContext','src',']\x20🟢\x20화면\x20공유\x20시작','querySelector','cols',']\x20⚠️\x20OpenCV\x20또는\x20템플릿이\x20준비되지\x20않았습니다.','error','currentTemplateName',']\x20❌\x20화면\x20공유\x20실패:','dataset','selectedTemplateName','matchTemplate','4265eFwNpD','getImageData','TM_CCOEFF_NORMED','onloadedmetadata','roly','none','load','matFromImageData',']\x20🔴\x20화면\x20공유\x20종료됨.\x20탐지\x20중지.','rolw','addEventListener','setItem','display','mediaDevices','Mat','log','108ybyEtI','grid',']\x20클릭된\x20템플릿\x20데이터:','undefined','minMaxLoc','rolh','toLocaleTimeString','getVideoTracks','matchThreshold','18664vNXBVi','delete','change','69RckcAK','roiYInput','matchThresholdInput','⚠️\x20공유\x20실패','getElementById','CV_32FC1','style','removeItem','🟢\x20화면\x20공유\x20중','551020DltwLS','video',']\x20매칭율:\x20','beforeunload','77GMeoBn',']\x20🎯\x20매칭\x20성공\x20('];_0x4fd6=function(){return _0x1119fb;};return _0x4fd6();}(function(_0x5e9587,_0x3698ef){const _0x54dd28=_0x5c0f,_0x12b4a2=_0x5e9587();while(!![]){try{const _0x1c54c6=parseInt(_0x54dd28('0x1a1'))/0x1*(-parseInt(_0x54dd28('0x1e7'))/0x2)+-parseInt(_0x54dd28('0x1d5'))/0x3*(parseInt(_0x54dd28('0x1a6'))/0x4)+parseInt(_0x54dd28('0x1b9'))/0x5*(parseInt(_0x54dd28('0x1a4'))/0x6)+-parseInt(_0x54dd28('0x1a8'))/0x7+-parseInt(_0x54dd28('0x1d2'))/0x8*(parseInt(_0x54dd28('0x1ea'))/0x9)+-parseInt(_0x54dd28('0x1de'))/0xa*(-parseInt(_0x54dd28('0x1e2'))/0xb)+-parseInt(_0x54dd28('0x1c9'))/0xc*(-parseInt(_0x54dd28('0x1eb'))/0xd);if(_0x1c54c6===_0x3698ef)break;else _0x12b4a2['push'](_0x12b4a2['shift']());}catch(_0x476fd6){_0x12b4a2['push'](_0x12b4a2['shift']());}}}(_0x4fd6,0x9da59));const video=document[_0x5930a4('0x1d9')](_0x5930a4('0x1df')),canvas=document[_0x5930a4('0x1d9')](_0x5930a4('0x1a7')),ctx=canvas['getContext']('2d'),alertSound=document[_0x5930a4('0x1d9')](_0x5930a4('0x19f')),statusIndicator=document[_0x5930a4('0x1d9')](_0x5930a4('0x1ed')),startBtn=document['getElementById']('startBtn'),selectTemplateBtn=document[_0x5930a4('0x1d9')]('selectTemplateBtn'),templateGrid=document[_0x5930a4('0x1d9')]('templateGrid'),currentTemplateNameSpan=document[_0x5930a4('0x1d9')](_0x5930a4('0x1b4')),roiWidthInput=document['getElementById']('roiWidthInput'),roiHeightInput=document[_0x5930a4('0x1d9')](_0x5930a4('0x1f1')),roiYInput=document[_0x5930a4('0x1d9')](_0x5930a4('0x1d6')),matchThresholdInput=document['getElementById'](_0x5930a4('0x1d7')),MATCH_THRESHOLD_KEY=_0x5930a4('0x1d1'),SELECTED_TEMPLATE_URL_KEY=_0x5930a4('0x1a3'),SELECTED_TEMPLATE_NAME_KEY=_0x5930a4('0x1b7');let currentRoiWidth=parseInt(roiWidthInput['value'])||0x1c2,currentRoiHeight=parseInt(roiHeightInput[_0x5930a4('0x19e')])||0x32,currentRoiY=parseInt(roiYInput[_0x5930a4('0x19e')])||0x78,currentMatchThreshold=parseFloat(localStorage[_0x5930a4('0x1a5')](MATCH_THRESHOLD_KEY))||parseFloat(matchThresholdInput[_0x5930a4('0x19e')])||0.978;const DETECTION_INTERVAL=0x1f4;let isOpenCVReady=![],isSharing=![],currentTemplateMat=null,resultMat=null,currentDetectionIntervalId=null;const waitForCV=setInterval(()=>{const _0x4a8dc6=_0x5930a4;typeof cv!==_0x4a8dc6('0x1cc')&&cv['matFromImageData']&&(clearInterval(waitForCV),isOpenCVReady=!![],console[_0x4a8dc6('0x1c8')]('['+new Date()[_0x4a8dc6('0x1cf')]()+_0x4a8dc6('0x1ee')));},0x64);async function loadTemplateImageFromUrl(_0x36285e,_0x595785){const _0x8a61f5=_0x5930a4,_0x10593d=document[_0x8a61f5('0x1b0')](_0x8a61f5('0x1f2')+_0x36285e+'\x22]');if(_0x10593d){const _0x1730e2=_0x10593d['dataset'][_0x8a61f5('0x1c2')],_0x58904f=_0x10593d['dataset']['rolh'],_0x502c5d=_0x10593d['dataset'][_0x8a61f5('0x1bd')];await loadTemplateImage(_0x36285e,_0x595785,_0x1730e2,_0x58904f,_0x502c5d);}else console[_0x8a61f5('0x1b3')]('['+new Date()['toLocaleTimeString']()+_0x8a61f5('0x1a0')+_0x36285e),currentTemplateNameSpan[_0x8a61f5('0x1e4')]='없음',localStorage[_0x8a61f5('0x1dc')](SELECTED_TEMPLATE_URL_KEY),localStorage[_0x8a61f5('0x1dc')](SELECTED_TEMPLATE_NAME_KEY);}async function loadTemplateImage(_0x337075,_0xe638d,_0x1dc688,_0x591130,_0x2086c3){const _0x6cf32=_0x5930a4;try{const _0x40c412=new Image();_0x40c412['src']=_0x337075,await new Promise(_0x4ddca4=>_0x40c412['onload']=_0x4ddca4);const _0x3ffd81=document['createElement'](_0x6cf32('0x1a7'));_0x3ffd81[_0x6cf32('0x1ab')]=_0x40c412[_0x6cf32('0x1e9')],_0x3ffd81[_0x6cf32('0x1e8')]=_0x40c412[_0x6cf32('0x1ac')];const _0x292001=_0x3ffd81[_0x6cf32('0x1ad')]('2d');_0x292001[_0x6cf32('0x1a2')](_0x40c412,0x0,0x0);const _0x368dc3=_0x292001['getImageData'](0x0,0x0,_0x3ffd81['width'],_0x3ffd81[_0x6cf32('0x1e8')]);currentTemplateMat&&currentTemplateMat[_0x6cf32('0x1d3')]();currentTemplateMat=cv[_0x6cf32('0x1c0')](_0x368dc3);if(resultMat)resultMat[_0x6cf32('0x1d3')]();resultMat=new cv['Mat'](0x1,0x1,cv[_0x6cf32('0x1da')]),currentTemplateNameSpan[_0x6cf32('0x1e4')]=_0xe638d,localStorage['setItem'](SELECTED_TEMPLATE_URL_KEY,_0x337075),localStorage[_0x6cf32('0x1c4')](SELECTED_TEMPLATE_NAME_KEY,_0xe638d),_0x1dc688!==undefined&&(currentRoiWidth=parseInt(_0x1dc688),roiWidthInput[_0x6cf32('0x19e')]=currentRoiWidth),_0x591130!==undefined&&(currentRoiHeight=parseInt(_0x591130),roiHeightInput[_0x6cf32('0x19e')]=currentRoiHeight),_0x2086c3!==undefined&&(currentRoiY=parseInt(_0x2086c3),roiYInput[_0x6cf32('0x19e')]=currentRoiY),templateGrid[_0x6cf32('0x1db')][_0x6cf32('0x1c5')]='none',console[_0x6cf32('0x1c8')]('['+new Date()[_0x6cf32('0x1cf')]()+']\x20✅\x20템플릿\x20이미지\x20\x27'+_0xe638d+'\x27\x20초기화\x20완료');}catch(_0xb4d559){console[_0x6cf32('0x1b3')]('['+new Date()[_0x6cf32('0x1cf')]()+_0x6cf32('0x1e6')+_0x337075,_0xb4d559);}}startBtn['addEventListener'](_0x5930a4('0x19b'),async()=>{const _0x1d141f=_0x5930a4;if(!isOpenCVReady||!currentTemplateMat){console[_0x1d141f('0x1ef')]('['+new Date()[_0x1d141f('0x1cf')]()+_0x1d141f('0x1b2'));return;}try{const _0x40a47f=await navigator[_0x1d141f('0x1c6')][_0x1d141f('0x19c')]({'video':!![]});video['srcObject']=_0x40a47f,isSharing=!![],statusIndicator[_0x1d141f('0x1e4')]=_0x1d141f('0x1dd'),console[_0x1d141f('0x1c8')]('['+new Date()[_0x1d141f('0x1cf')]()+_0x1d141f('0x1af')),_0x40a47f[_0x1d141f('0x1d0')]()[0x0][_0x1d141f('0x1c3')]('ended',()=>{const _0x5184c4=_0x1d141f;isSharing=![],statusIndicator[_0x5184c4('0x1e4')]='🔴\x20공유\x20안\x20됨',currentDetectionIntervalId&&(clearInterval(currentDetectionIntervalId),currentDetectionIntervalId=null,console[_0x5184c4('0x1c8')]('['+new Date()[_0x5184c4('0x1cf')]()+_0x5184c4('0x1c1')));}),video[_0x1d141f('0x1bc')]=()=>{currentDetectionIntervalId&&clearInterval(currentDetectionIntervalId),currentDetectionIntervalId=setInterval(()=>{isSharing&&detectImageOnScreen(currentRoiWidth,currentRoiHeight,currentRoiY,currentMatchThreshold,currentTemplateMat);},DETECTION_INTERVAL);};}catch(_0x22a1cb){statusIndicator[_0x1d141f('0x1e4')]=_0x1d141f('0x1d8'),console['error']('['+new Date()[_0x1d141f('0x1cf')]()+_0x1d141f('0x1b5'),_0x22a1cb);}});function detectImageOnScreen(_0x311946,_0xc5fb70,_0x57f4f7,_0x123002,_0x464ace){const _0x229a7f=_0x5930a4;if(video['videoWidth']===0x0||video[_0x229a7f('0x1e5')]===0x0)return;const _0x2d7d67=video['videoWidth']-_0x311946,_0x55b18f=_0x57f4f7;canvas[_0x229a7f('0x1ab')]=_0x311946,canvas[_0x229a7f('0x1e8')]=_0xc5fb70,ctx[_0x229a7f('0x1a2')](video,_0x2d7d67,_0x55b18f,_0x311946,_0xc5fb70,0x0,0x0,_0x311946,_0xc5fb70);const _0x22c90b=ctx[_0x229a7f('0x1ba')](0x0,0x0,_0x311946,_0xc5fb70),_0x328c89=cv[_0x229a7f('0x1c0')](_0x22c90b),_0x2e375a=_0x328c89['cols']-_0x464ace[_0x229a7f('0x1b1')]+0x1,_0x28a38b=_0x328c89[_0x229a7f('0x1ec')]-_0x464ace[_0x229a7f('0x1ec')]+0x1;if(_0x2e375a<=0x0||_0x28a38b<=0x0){console[_0x229a7f('0x1ef')]('['+new Date()[_0x229a7f('0x1cf')]()+']\x20⚠️\x20템플릿이\x20ROI보다\x20큽니다.\x20다른\x20템플릿을\x20선택하거나\x20ROI를\x20크게\x20설정하세요.'),_0x328c89[_0x229a7f('0x1d3')]();return;}if(resultMat)resultMat['delete']();resultMat=new cv[(_0x229a7f('0x1c7'))](_0x28a38b,_0x2e375a,cv[_0x229a7f('0x1da')]),cv[_0x229a7f('0x1b8')](_0x328c89,_0x464ace,resultMat,cv[_0x229a7f('0x1bb')]);const {maxVal:_0x526fba}=cv[_0x229a7f('0x1cd')](resultMat),_0x2cbb5c=_0x526fba>=_0x123002;_0x526fba>=0.9&&console[_0x229a7f('0x1c8')]('['+new Date()[_0x229a7f('0x1cf')]()+_0x229a7f('0x1e0')+(_0x526fba*0x64)[_0x229a7f('0x19d')](0x2)+'%'),_0x2cbb5c&&(alertSound['currentTime']=0x0,alertSound[_0x229a7f('0x1aa')](),console['log']('['+new Date()[_0x229a7f('0x1cf')]()+_0x229a7f('0x1e3')+(_0x526fba*0x64)[_0x229a7f('0x19d')](0x2)+'%)')),_0x328c89[_0x229a7f('0x1d3')]();}function _0x5c0f(_0x44e8ae,_0x58154f){const _0x4fd647=_0x4fd6();return _0x5c0f=function(_0x5c0f34,_0x4b4b0f){_0x5c0f34=_0x5c0f34-0x19b;let _0x4d9acb=_0x4fd647[_0x5c0f34];return _0x4d9acb;},_0x5c0f(_0x44e8ae,_0x58154f);}selectTemplateBtn[_0x5930a4('0x1c3')](_0x5930a4('0x19b'),()=>{const _0x1d3be4=_0x5930a4;templateGrid[_0x1d3be4('0x1db')][_0x1d3be4('0x1c5')]=templateGrid['style'][_0x1d3be4('0x1c5')]===_0x1d3be4('0x1be')?_0x1d3be4('0x1ca'):_0x1d3be4('0x1be');}),templateGrid[_0x5930a4('0x1c3')](_0x5930a4('0x19b'),_0x10bad9=>{const _0x144046=_0x5930a4,_0x24c3f4=_0x10bad9[_0x144046('0x1a9')]['closest']('.template-item');if(_0x24c3f4){const _0x372c5e=_0x24c3f4[_0x144046('0x1b0')](_0x144046('0x1f0')),_0x514365=_0x372c5e[_0x144046('0x1ae')],_0x2ba5ed=_0x372c5e['dataset']['templateName'],_0x40e0f8=_0x372c5e[_0x144046('0x1b6')][_0x144046('0x1c2')],_0x55005f=_0x372c5e[_0x144046('0x1b6')][_0x144046('0x1ce')],_0x526125=_0x372c5e[_0x144046('0x1b6')][_0x144046('0x1bd')];console[_0x144046('0x1c8')]('['+new Date()[_0x144046('0x1cf')]()+_0x144046('0x1cb'),{'templateName':_0x2ba5ed,'rolw':_0x40e0f8,'rolh':_0x55005f,'roly':_0x526125}),loadTemplateImage(_0x514365,_0x2ba5ed,_0x40e0f8,_0x55005f,_0x526125);}}),window[_0x5930a4('0x1c3')](_0x5930a4('0x1bf'),()=>{const _0x2b909f=_0x5930a4;roiWidthInput[_0x2b909f('0x19e')]=currentRoiWidth,roiHeightInput[_0x2b909f('0x19e')]=currentRoiHeight,roiYInput[_0x2b909f('0x19e')]=currentRoiY,matchThresholdInput[_0x2b909f('0x19e')]=currentMatchThreshold,localStorage[_0x2b909f('0x1a5')](MATCH_THRESHOLD_KEY)===null&&localStorage[_0x2b909f('0x1c4')](MATCH_THRESHOLD_KEY,currentMatchThreshold);}),roiWidthInput[_0x5930a4('0x1c3')](_0x5930a4('0x1d4'),_0x23a686=>{currentRoiWidth=parseInt(_0x23a686['target']['value']);}),roiHeightInput[_0x5930a4('0x1c3')]('change',_0x5c4b1f=>{const _0x5f274d=_0x5930a4;currentRoiHeight=parseInt(_0x5c4b1f['target'][_0x5f274d('0x19e')]);}),roiYInput['addEventListener']('change',_0x2b3824=>{const _0x20b913=_0x5930a4;currentRoiY=parseInt(_0x2b3824[_0x20b913('0x1a9')][_0x20b913('0x19e')]);}),matchThresholdInput[_0x5930a4('0x1c3')]('change',_0x4781ed=>{const _0x38df74=_0x5930a4;currentMatchThreshold=parseFloat(_0x4781ed[_0x38df74('0x1a9')][_0x38df74('0x19e')]),localStorage[_0x38df74('0x1c4')](MATCH_THRESHOLD_KEY,currentMatchThreshold);}),window['addEventListener'](_0x5930a4('0x1e1'),()=>{const _0x5ce7b9=_0x5930a4;currentTemplateMat?.[_0x5ce7b9('0x1d3')](),resultMat?.['delete'](),console[_0x5ce7b9('0x1c8')]('['+new Date()[_0x5ce7b9('0x1cf')]()+']\x20🧹\x20OpenCV\x20Mat\x20객체\x20메모리\x20해제\x20완료');});